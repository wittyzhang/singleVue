(function(e){function t(t){for(var s,i,c=t[0],o=t[1],l=t[2],_=0,p=[];_<c.length;_++)i=c[_],n[i]&&p.push(n[i][0]),n[i]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,c=1;c<a.length;c++){var o=a[c];0!==n[o]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},n={app:0},r=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1692:function(e,t,a){},"21cc":function(e,t,a){},2529:function(e,t,a){},"27dd":function(e,t,a){},"2a2f":function(e,t,a){},"32dc":function(e,t,a){},4523:function(e,t,a){},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=r(e);return a(t)}function r(e){var t=s[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);var s={token:"",user_info:{},contract:{}},n={getContract:function(){return s.contract},getUserInfo:function(){return s.user_info}},r={setContract:function(e,t){e.contract=t},set_token:function(e,t){e.token=t,sessionStorage.token=t},del_token:function(e){e.token="",sessionStorage.removeItem("token")},set_userInfo:function(e,t){e.user_info=t,sessionStorage.user_info=JSON.stringify(t)}},i={getNewContract:function(e,t){e.commit("changeContract",t)}},c=new Vuex.Store({state:s,getters:n,mutations:r,actions:i}),o=c,l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login"}},[a("div",{staticClass:"content_wrap"},[e._m(0),a("div",{staticClass:"login_main"},[a("div",{staticClass:"login_box"},[a("h3",[e._v("登录")]),a("div",{staticClass:"user_name _bottom _relative"},[a("p",[e._v("账号：")]),a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}})],1),a("div",{staticClass:"password _bottom _relative _mt60"},[a("p",[e._v("密码：")]),a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:e.show_codeError,expression:"show_codeError"}],staticClass:"error_txt"},[e._v("*"+e._s(e.errortxt))])],1),a("button",{staticClass:"btn_login",on:{click:e.loginSubmit}},[e._v("登录")])])])])])},u=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top_logo"},[a("img",{attrs:{src:"https://img.miyabaobei.com/d1/p6/2020/08/10/47/d0/47d080aa706b513307674dd00940b669267245660.png",alt:""}})])}],_=a("a34a"),p=a.n(_),d=a("4328"),f=a.n(d);function h(e,t,a){return t=t||{},a=a||5e3,new Promise(function(s,n){if("string"!==typeof e)throw new Error('[Vue.jsonp] Type of param "url" is not string.');var r=t.callbackQuery||"callback",i=t.callbackName||"jsonp_"+m();t[r]=i,delete t.callbackQuery,delete t.callbackName;var c=[];Object.keys(t).forEach(function(e){c=c.concat(v(e,t[e]))});var o=b(c).join("&"),l=null;"number"===typeof a&&(l=setTimeout(function(){d(),u.removeChild(_),delete window[i],n({statusText:"Request Timeout",status:408})},a)),window[i]=function(e){clearTimeout(l),d(),u.removeChild(_),s(e),delete window[i]};var u=document.querySelector("head"),_=document.createElement("script");function p(e){d(),clearTimeout(l),n({status:400,statusText:"Bad Request"})}function d(){_.removeEventListener("error",p)}_.addEventListener("error",p),_.src=e+(/\?/.test(e)?"&":"?")+o,u.appendChild(_)})}function m(){return(Math.floor(1e5*Math.random())*Date.now()).toString(16)}function v(e,t){e=e.replace(/=/g,"");var a=[];switch(t.constructor){case String:case Number:case Boolean:a.push(encodeURIComponent(e)+"="+encodeURIComponent(t));break;case Array:t.forEach(function(t){a=a.concat(v(e+"[]=",t))});break;case Object:Object.keys(t).forEach(function(s){var n=t[s];a=a.concat(v(e+"["+s+"]",n))});break}return a}function b(e){var t=[];return e.forEach(function(e){"string"===typeof e?t.push(e):t=t.concat(b(e))}),t}var g=h,y=a("8237"),C=a.n(y),w=a("720d"),x=a.n(w),k=new x.a,j="-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCiwJbb2EeK9ZB4Chyj5/mIVPRE\nod0pJrv3LM2UVtkod+2mPVjV9Xi1E06gUaoexX/ebfRXm1eBwu3LtYbklh5Ji5oF\nycoUCFhwzhmm8ZtjdkCIicFfxUU4I5NunL6+37+hy43EgCrao5tFgHtnkeR/vNyG\nfaxdxevPbVEtWlJz6wIDAQAB\n-----END PUBLIC KEY-----";function $(e,t){var a={method:"POST",url:e,data:f.a.stringify(t)};return new Promise(function(e,t){axios(a).then(function(t){e(t.data)}).catch(function(e){t(e)})})}function S(e,t){return t=t||{callbackName:"success_jsonpCallback"},new Promise(function(a,s){g(e,t).then(function(e){a(e)}).catch(function(e){s(e)})})}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.data,s=void 0===a?{}:a,n=t.options,r=void 0===n?{}:n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=JSON.stringify(s||{}),o="",l=39,u=Math.ceil(c.length/l);if(u>1)for(var _=0;_<u;_++)o+=k.encrypt(c.substring(_*l,(_+1)*l));else o=k.encrypt(c);var p=Object.assign({timestamp:parseInt((new Date).getTime()/1e3),version:"m_1_0",user_plus_type:0,session:"123",app_id:"m_app_id",params:o},r),d="",h=Object.keys(p).sort();return h.forEach(function(e){d+="".concat(e).concat(p[e])}),p.sign=C()(d+"MiaBaoBei@0!30308"),new Promise(function(t,a){axios({method:"post",url:e,headers:Object.assign({"Content-Type":"application/x-www-form-urlencoded"},i),data:f.a.stringify(p)}).then(function(e){t(e.data)}).catch(function(e){a(e)})})}k.setPublicKey(j),axios.defaults.timeout=1e5,axios.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",axios.defaults.headers.post["X-Requested-With"]="XMLHttpRequest",axios.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",axios.defaults.headers.get["X-Requested-With"]="XMLHttpRequest",axios.defaults.baseURL="/api",axios.interceptors.request.use(function(e){return e.headers.Authorization="Pandora "+o.state.token,e},function(e){return Promise.reject(e)}),axios.interceptors.response.use(function(e){if(200===e.status){location.hostname;var t=e.data;return Promise.resolve({data:t})}return Promise.reject(e)},function(e){return Promise.reject(e)});var I={api_post_form:z,get:function(e,t,a){return new Promise(function(s,n){a=a||{},a.params=t,axios.get(e,a).then(function(e){s(e.data)},function(e){n(e)})})},post:function(e,t,a){return $(e,t,"post",a)},put:function(e,t,a){return $(e,t,"put",a)},upload:function(e,t,a){return new Promise(function(a,s){axios({method:"POST",url:e,data:t,headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a(e.data)}).catch(function(e){s(e)})})},delete:function(e,t,a){return new Promise(function(s,n){a=a||{},a.params=t,axios.delete(e,a).then(function(e){s(e.data)},function(e){n(e)})})},patch:function(e,t,a){return $(e,t,"patch",a)},jsonp:function(e,t){return S(e,t)}};function P(e,t,a,s,n,r,i){try{var c=e[r](i),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(s,n)}function E(e){return function(){var t=this,a=arguments;return new Promise(function(s,n){var r=e.apply(t,a);function i(e){P(r,s,n,i,c,"next",e)}function c(e){P(r,s,n,i,c,"throw",e)}i(void 0)})}}var O={data:function(){return{mobile:"",password:"",gvcLock:!1,errortxt:""}},created:function(){},methods:{login:function(){var e=E(p.a.mark(function e(){var t;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.post("/login",{username:this.mobile,password:this.password});case 2:t=e.sent,200==t.code?(this.$store.commit("set_token",t.data.token),this.$store.commit("set_userInfo",t.data.user_info),this.$store.state.token?2==t.data.if_safe?this.$router.push("/rest_passw"):this.$router.push("/supplier_list"):this.$router.replace("/login")):this.$message.error(t.msg);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),loginSubmit:function(){if(""==this.mobile||""==this.password)return this.errortxt="账号或密码不能为空",this.gvcLock=!1,this.show_codeError=!0,!1;this.errortxt="",this.show_codeError=!1,this.login()}}},T=O,L=(a("c995"),a("2877")),N=Object(L["a"])(T,l,u,!1,null,"f5a4c9de",null),M=N.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"contract_details"}},[a("section",{staticClass:"hx_panel"},[a("div",{staticClass:"title"},[e._v("供应商列表")]),a("div",{staticClass:"content _mt20"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"商家id："}},[a("el-input",{attrs:{placeholder:"商家id"},model:{value:e.formInline.supplier_id,callback:function(t){e.$set(e.formInline,"supplier_id",t)},expression:"formInline.supplier_id"}})],1),a("el-form-item",{attrs:{label:"商家名称："}},[a("el-input",{attrs:{placeholder:"商家名称"},model:{value:e.formInline.supplier_name,callback:function(t){e.$set(e.formInline,"supplier_name",t)},expression:"formInline.supplier_name"}})],1),a("el-form-item",{attrs:{label:"招商负责人："}},[a("el-select",{attrs:{placeholder:"招商负责人"},model:{value:e.formInline.admin_id,callback:function(t){e.$set(e.formInline,"admin_id",t)},expression:"formInline.admin_id"}},e._l(e.SupplierUsers,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),a("el-button",{on:{click:e.onRest}},[e._v("重置")])],1)],1),a("el-table",{staticStyle:{width:"100%","margin-top":"40px"},attrs:{data:e.list,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),a("el-table-column",{attrs:{prop:"supplier_id",label:"商家id",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticClass:"link_btn",attrs:{to:""}},[e._v(e._s(t.row.supplier_id))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"supplier_name",label:"商家名称"}}),a("el-table-column",{attrs:{width:"120",align:"center",prop:"agent_name",label:"经办人"}}),a("el-table-column",{attrs:{width:"180",align:"center",prop:"agent_mobile",label:"经办人手机号"}}),a("el-table-column",{attrs:{width:"120",align:"center",prop:"admin_name",label:"招商负责人"}}),a("el-table-column",{attrs:{prop:"create_date",align:"center",width:"200",label:"创建时间"}})],1),a("div",{staticClass:"_mt20"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.listTotal},on:{"current-change":e.handleCurrentChange}})],1)],1)])])},D=[];function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach(function(t){U(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function X(e,t,a,s,n,r,i){try{var c=e[r](i),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(s,n)}function B(e){return function(){var t=this,a=arguments;return new Promise(function(s,n){var r=e.apply(t,a);function i(e){X(r,s,n,i,c,"next",e)}function c(e){X(r,s,n,i,c,"throw",e)}i(void 0)})}}var R={data:function(){return{formInline:{supplier_id:"",supplier_name:"",admin_id:"",page_size:10,page_number:1},page:1,list:[],listTotal:0,SupplierUsers:[]}},mounted:function(){this.getSupplierUsers(),this.getList(this.formInline)},methods:{getList:function(){var e=B(p.a.mark(function e(t){var a;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a={code:200,msg:"success",data:{list:[{supplier_id:"1",supplier_name:"常州小名堂商贸有限公司",agent_name:"吴丹2",agent_mobile:"18340009954",create_date:"2020-12-29 17:43:33",admin_name:"张方宇1"},{supplier_id:"4",supplier_name:"公司名称",agent_name:"经办人",agent_mobile:"18513140851",create_date:"2020-12-30 11:43:42",admin_name:"tester"}],total:20}},200==a.code?(this.list=a.data.list,this.listTotal=a.data.total):this.$message.error(a.msg);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getSupplierUsers:function(){var e=B(p.a.mark(function e(){var t;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t={code:200,msg:"请求成功",data:{list:{5195964:"张方宇1"}}},200==t.code?this.SupplierUsers=t.data.list:this.$message.error(t.msg);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){console.log("submit!");var e=V({},this.formInline);console.log(e),this.getList(e)},onRest:function(){this.formInline={supplier_id:"",supplier_name:"",admin_id:"",page_size:10,page_number:1},console.log(this.formInline),this.getList(this.formInline)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.formInline.page_number=e;var t=V({},this.formInline);console.log(t),this.getList(t)}}},F=R,J=(a("fe01"),Object(L["a"])(F,A,D,!1,null,"1c3a47ad",null)),G=J.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"contract_details"}},[a("section",{staticClass:"hx_panel"},[a("div",{staticClass:"title"},[e._v("1.合同基本信息")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合同号：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.contract_no))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合作供应商：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.supplier_name))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合作性质：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.contract_type))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合同状态：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.status))])])])])]),a("section",{staticClass:"hx_panel _mt20"},[a("div",{staticClass:"title"},[e._v("2.商户付款银行信息 & 该合同付款要求")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("付款公司全称：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.payee_name))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("付款银行、账号：")]),a("div",{staticClass:"con"},[e._v("开户行："+e._s(e.contract_info.open_bank)+"  账号："+e._s(e.contract_info.open_account))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("付款要求：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.fee_batch))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("本次缴费内容：")]),a("div",{staticClass:"con"},[a("ul",[a("li",[e._v("固定服务费: "+e._s(e.contract_info.servie_charge1>0?e.contract_info.servie_charge1+e.contract_info.servie_currency1:"(不收取)"))]),a("li",[e._v("保证金："+e._s(e.contract_info.deposit_cnt>0?e.contract_info.deposit_cnt+e.contract_info.deposit_currency:"(不收取保证金)")+" • 退保证金条件："+e._s(e.contract_info.deposit_return_type)+" "+e._s(e.contract_info.deposit_return_days)+"个自然日 之后退还（遇节假日顺延）")])])])]),e.contract_info.servie_charge2>0?a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("第二次缴费：")]),a("div",{staticClass:"con"},[a("ul",[a("li",[e._v(e._s(e.contract_info.servie_charge2+e.contract_info.servie_currency2))])])])]):e._e(),e.contract_info.servie_charge3>0?a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("第三次缴费：")]),a("div",{staticClass:"con"},[a("ul",[a("li",[e._v(e._s(e.contract_info.servie_charge3+e.contract_info.servie_currency3))])])])]):e._e()])])]),a("section",{staticClass:"hx_panel _mt20"},[a("div",{staticClass:"title"},[e._v("3.合同协议文本")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[e._m(0),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合同文本：")]),a("div",{staticClass:"con"},[a("ul",e._l(e.contract_info.contract_agreement,function(t,s){return a("li",{key:s},[e._v("\n                合同文本"+e._s(t.agreement_no)+"："),a("a",{staticClass:"btn link_btn",attrs:{href:t.fileurl}},[e._v(e._s(t.name))]),a("span",{staticClass:"gztip"},[e._v("已经提交"),a("em",[e._v(" "+e._s(t.signature_count)+" ")]),e._v("处盖章位置")])])}),0)])])])])]),a("section",{staticClass:"hx_panel _mt20"},[a("div",{staticClass:"title"},[e._v("4.合同协议操作记录")]),a("div",{staticClass:"content _mt20"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.contract_info.approval_log_list}},[a("el-table-column",{attrs:{prop:"op_step",align:"center",label:"操作步骤",width:"120"}}),a("el-table-column",{attrs:{prop:"op_content",align:"center",label:"操作内容",width:"120"}}),a("el-table-column",{attrs:{prop:"op_remark",align:"center",label:"备注",width:"120"}}),a("el-table-column",{attrs:{prop:"op_username",align:"center",label:"操作人",width:"80"}}),a("el-table-column",{attrs:{prop:"op_datetime",align:"center",label:"操作时间"}})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showContract,expression:"showContract"}],staticClass:"mask"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showContract,expression:"showContract"}],staticClass:"popModule"},[a("section",{staticClass:"hx_panel"},[a("div",{staticClass:"title"},[e._v("审阅协议文本")]),a("div",{staticClass:"content _mt20"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" XXXXXXXXXXXXXXXXXXXXXXXX.PDF")]),a("div",{staticStyle:{"font-weight":"500","margin-bottom":"10px"}},[e._v("2. 协议正文审阅")]),a("embed",{staticStyle:{"overflow-x":"hidden"},attrs:{width:"950",height:"600",src:"https://www.baidu.com"}})]),a("el-tab-pane",{attrs:{label:"消息中心"}}),a("el-tab-pane",{attrs:{label:"角色管理"}},[a("img",{attrs:{src:"https://img.miyabaobei.com/d1/p6/2020/06/19/91/38/9138e7c3ec5af39d3fae259f68cc421e541294402.png"}})]),a("el-tab-pane",{attrs:{label:"定时任务补偿"}},[e._v("定时任务补偿")])],1),a("div",{staticClass:"_mt20"},[a("el-button",{attrs:{size:"small"},on:{click:e.hideContract}},[e._v("返回")])],1)],1)])])])},K=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("使用的合同文本类型：")]),a("div",{staticClass:"con"},[e._v("使用自行上传的合同文本")])])}];function W(e,t,a,s,n,r,i){try{var c=e[r](i),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(s,n)}function H(e){return function(){var t=this,a=arguments;return new Promise(function(s,n){var r=e.apply(t,a);function i(e){W(r,s,n,i,c,"next",e)}function c(e){W(r,s,n,i,c,"throw",e)}i(void 0)})}}var Y={data:function(){return{showContract:!1,isgaizhang:"",contract_no:"",contract_info:null}},mounted:function(){this.contract_no=this.$route.query.id,this.getDetails()},methods:{showContractFn:function(){this.showContract=!0},hideContract:function(){this.showContract=!1},getDetails:function(){var e=H(p.a.mark(function e(){var t;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t={code:200,msg:"success",data:{contract_no:"CT-8838-20201206",supplier_id:4,supplier_name:"常州小名堂商贸有限公司",purchaser_name:"杭州岛屿星河信息技术有限公司",contract_type:"直播服务【单次】合作协议",status:"待 法务 审批",payee_name:"公司名称",open_bank:"招商银行北京支行",open_account:"102100000030",fee_batch:"3次付款",servie_charge1:"500.00",servie_currency1:"人民币",servie_charge2:"200.00",servie_currency2:"人民币",servie_charge3:"300.00",servie_currency3:"人民币",deposit_cnt:"600.00",deposit_currency:"人民币",deposit_return_type:"直播结束后",deposit_return_days:"30",contract_agreement:[{agreement_no:1,name:"合同协议1.pdf",fileurl:"http://upload.miyabaobei.com/d1/p6/2020/02/21/95/c4/95c4be3f0a15fbd68bf1c781ad52a621807679195.pdf",signature_count:2},{agreement_no:2,name:"合同协议2.pdf",fileurl:"http://upload.miyabaobei.com/d1/p6/2020/02/21/95/c4/95c4be3f0a15fbd68bf1c781ad52a621807679195.pdf",signature_count:0}],approval_log_list:[{op_step:"申请",op_content:"提交申请",op_remark:"备注",op_username:"闫冬",op_datetime:"2020-12-31 10:00:00"},{op_step:"待法务审核",op_content:"合同审核",op_remark:"备注",op_username:"刘楠",op_datetime:"2021-01-01 10:00:00"}]}},200==t.code?this.contract_info=t.data:this.$message.error(t.msg);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},Z=Y,ee=(a("f88d"),Object(L["a"])(Z,Q,K,!1,null,"48b7cb3d",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.baseInfo?a("div",{attrs:{id:"contract_style1"}},[a("section",{staticClass:"hx_panel"},[a("div",{staticClass:"title"},[e._v("1.签约供应商基本信息")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("直播合作供应商：")]),a("div",{staticClass:"con"},[e._v(e._s(e.baseInfo.supplier_name))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("我方签约主体：")]),a("div",{staticClass:"con"},[e._v(e._s(e.baseInfo.purchaser_name))])])])])]),a("section",{staticClass:"hx_panel _mt20"},[a("div",{staticClass:"title"},[e._v("2.填写【直播外链商品商户合同】基本信息")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[a("li",{staticClass:"table_li"},[e._m(0),a("div",{staticClass:"con"},[a("el-radio-group",{model:{value:e.contract_type,callback:function(t){e.contract_type=t},expression:"contract_type"}},[a("el-radio",{attrs:{label:"1"}},[e._v(e._s(e.baseInfo.contract_type["1"]))]),a("el-radio",{attrs:{label:"2"}},[e._v(e._s(e.baseInfo.contract_type["2"]))])],1)],1)]),a("li",{staticClass:"table_li"},[e._m(1),a("div",{staticClass:"con"},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/uploade/upload_ajax_ums.php",accept:"image/JPG,image/jpeg,application/pdf",name:"Filedata","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.uploadSuccess,"before-remove":e.beforeRemove,data:{up_type:"other"},multiple:"","file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip right_tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 仅支持 PDF和JPG格式文件，可传多个 "),a("br"),e._v(" 如走过预审，则请附带上传"),a("span",{staticClass:"redColor"},[e._v("审过的单据截图")])])],1)],1)]),a("li",{staticClass:"table_li"},[e._m(2),a("div",{staticClass:"con"},[a("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("操作：")]),a("div",{staticClass:"con"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleNext}},[e._v("提交，继续下一步")])],1)])])])]),a("section",{directives:[{name:"show",rawName:"v-show",value:e.showThreeModule,expression:"showThreeModule"}],staticClass:"hx_panel _mt20"},[a("div",{staticClass:"title"},[e._v("3.填写本合同缴费要求")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[a("li",{staticClass:"table_li"},[e._m(3),a("div",{staticClass:"con"},[a("el-input",{staticStyle:{width:"80px"},attrs:{placeholder:"",size:"small"},model:{value:e.commission_rate,callback:function(t){e.commission_rate=t},expression:"commission_rate"}}),e._v("% 不给佣金，或者本协议不涉及佣金收付问题的，请填0，不要空着")],1)]),a("li",{staticClass:"table_li"},[e._m(4),a("div",{staticClass:"con"},[a("el-select",{staticStyle:{width:"270px"},attrs:{size:"small",placeholder:"请选择本合同约定的缴费方式"},model:{value:e.fee_batch,callback:function(t){e.fee_batch=t},expression:"fee_batch"}},e._l(e.baseInfo.fee_batch,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1)]),a("li",{directives:[{name:"show",rawName:"v-show",value:""!=e.fee_batch&&4!=e.fee_batch,expression:"fee_batch != '' && fee_batch != 4"}],staticClass:"table_li"},[e._m(5),a("div",{staticClass:"con"},[a("div",[a("el-checkbox",{model:{value:e.pay_step1_one_gdfwf,callback:function(t){e.pay_step1_one_gdfwf=t},expression:"pay_step1_one_gdfwf"}},[e._v("固定服务费")]),a("el-input",{staticClass:"_ml10 _mr10",staticStyle:{width:"80px"},attrs:{placeholder:"",size:"small",disabled:!e.pay_step1_one_gdfwf},model:{value:e.servie_charge1,callback:function(t){e.servie_charge1=t},expression:"servie_charge1"}}),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",disabled:!e.pay_step1_one_gdfwf,placeholder:"元人民币"},model:{value:e.servie_currency1,callback:function(t){e.servie_currency1=t},expression:"servie_currency1"}},e._l(e.baseInfo.currency_list,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1),a("div",{staticClass:"right_tip"},[e._v("不给固定服务费（坑位费），则不要点复选框")])],1),a("div",{staticClass:"_mt10"},[a("el-checkbox",{model:{value:e.pay_step1_one_bzj,callback:function(t){e.pay_step1_one_bzj=t},expression:"pay_step1_one_bzj"}},[e._v("保证金")]),a("el-input",{staticClass:"_ml10 _mr10",staticStyle:{width:"80px"},attrs:{disabled:!e.pay_step1_one_bzj,placeholder:"",size:"small"},model:{value:e.deposit_cnt,callback:function(t){e.deposit_cnt=t},expression:"deposit_cnt"}}),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",disabled:!e.pay_step1_one_bzj,placeholder:"元人民币"},model:{value:e.deposit_currency,callback:function(t){e.deposit_currency=t},expression:"deposit_currency"}},e._l(e.baseInfo.currency_list,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1),a("div",{staticClass:"right_tip"},[e._v("不给保证金，则不要点复选框")]),a("div",{staticClass:"_mt10 _pl20"},[e._v("\n              退保证金条件\n              "),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",disabled:!e.pay_step1_one_bzj,placeholder:"请选择"},model:{value:e.deposit_return_type,callback:function(t){e.deposit_return_type=t},expression:"deposit_return_type"}},e._l(e.baseInfo.deposit_return_type,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1),a("el-input",{staticClass:"_ml10 _mr10",staticStyle:{width:"80px"},attrs:{type:"number",disabled:!e.pay_step1_one_bzj,placeholder:"",size:"small"},model:{value:e.deposit_return_date,callback:function(t){e.deposit_return_date=t},expression:"deposit_return_date"}}),e._v("个自然日之后退还（遇节假日顺延）\n            ")],1)],1)])]),a("li",{directives:[{name:"show",rawName:"v-show",value:""!=e.fee_batch&&1!=e.fee_batch&&4!=e.fee_batch,expression:"fee_batch != '' && fee_batch != 1 && fee_batch != 4"}],staticClass:"table_li"},[e._m(6),a("div",{staticClass:"con"},[a("el-checkbox",{attrs:{disabled:""},model:{value:e.pay_step2,callback:function(t){e.pay_step2=t},expression:"pay_step2"}}),e._v(" 固定服务费\n            "),a("el-input",{staticClass:"_ml10 _mr10",staticStyle:{width:"80px"},attrs:{placeholder:"",size:"small"},model:{value:e.servie_charge2,callback:function(t){e.servie_charge2=t},expression:"servie_charge2"}}),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"元人民币"},model:{value:e.servie_currency2,callback:function(t){e.servie_currency2=t},expression:"servie_currency2"}},e._l(e.baseInfo.currency_list,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1)]),a("li",{directives:[{name:"show",rawName:"v-show",value:""!=e.fee_batch&&3==e.fee_batch&&4!=e.fee_batch,expression:"fee_batch != '' && fee_batch == 3 && fee_batch != 4"}],staticClass:"table_li"},[e._m(7),a("div",{staticClass:"con"},[a("el-checkbox",{attrs:{disabled:""},model:{value:e.pay_step3,callback:function(t){e.pay_step3=t},expression:"pay_step3"}}),e._v(" 固定服务费\n            "),a("el-input",{staticClass:"_ml10 _mr10",staticStyle:{width:"80px"},attrs:{placeholder:"",size:"small"},model:{value:e.servie_charge3,callback:function(t){e.servie_charge3=t},expression:"servie_charge3"}}),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"元人民币"},model:{value:e.servie_currency3,callback:function(t){e.servie_currency3=t},expression:"servie_currency3"}},e._l(e.baseInfo.currency_list,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1)]),a("li",{directives:[{name:"show",rawName:"v-show",value:""!=e.fee_batch,expression:"fee_batch != ''"}],staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("操作：")]),a("div",{staticClass:"con"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleNextPage}},[e._v("提交，继续下一步")])],1)])])])])]):e._e()},se=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"label"},[a("span",{staticClass:"required"},[e._v("*")]),e._v("合作性质：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"label"},[a("span",{staticClass:"required"},[e._v("*")]),e._v("合同模板：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"label"},[a("span",{staticClass:"required"},[e._v("*")]),e._v("合同有效期：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"label"},[a("span",{staticClass:"required"},[e._v("*")]),e._v("直播服务佣金比例：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"label"},[a("span",{staticClass:"required"},[e._v("*")]),e._v("分批缴费要求：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"label"},[a("span",{staticClass:"required"},[e._v("*")]),e._v("本次缴费内容：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"label"},[a("span",{staticClass:"required"},[e._v("*")]),e._v("第2次缴费内容：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"label"},[a("span",{staticClass:"required"},[e._v("*")]),e._v("第3次缴费内容：")])}];function ne(e,t,a,s,n,r,i){try{var c=e[r](i),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(s,n)}function re(e){return function(){var t=this,a=arguments;return new Promise(function(s,n){var r=e.apply(t,a);function i(e){ne(r,s,n,i,c,"next",e)}function c(e){ne(r,s,n,i,c,"throw",e)}i(void 0)})}}var ie={data:function(){return{baseInfo:null,supplier_id:"",contract_type:"",paramUpload:[],fileList:[{name:"JavaScript模式 (2).pdf",percentage:100,response:"FILEID:d1/p6/2021/01/05/49/57/495783774242b782f88ed4c3f8f6c605389442315.pdf",size:3736678,status:"success",uid:1609838938615},{name:"WechatIMG420.jpeg",percentage:100,response:"FILEID:d1/p6/2021/01/05/54/9b/549b6476027c3109123041482c6a5d63389469488.jpeg",size:297720,status:"success",uid:1609838938619}],date:"",commission_rate:"",fee_batch:"",pay_step2:!0,servie_charge2:"",servie_currency2:"1",pay_step3:!0,servie_charge3:"",servie_currency3:"1",pay_step1_one_gdfwf:!1,servie_charge1:"",servie_currency1:"1",pay_step1_one_bzj:!1,deposit_cnt:"",deposit_currency:"1",deposit_return_date:"",deposit_return_type:"",showThreeModule:!1}},mounted:function(){this.supplier_id=this.$route.query.supplier_id,this.getBaseInfo()},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},uploadSuccess:function(e,t,a){e.replace("FILEID:","")},handleNext:function(){return console.log(this.contract_type,this.fileList,this.date),""==this.contract_type?(this.$message.error("请选择合作性质"),!1):0==this.fileList.length?(this.$message.error("请上传合同模版"),!1):""==this.date?(this.$message.error("请选择合同有效期"),!1):void(""!=this.contract_type&&this.fileList.length>0&&""!=this.date&&(this.showThreeModule=!0))},handleNextPage:function(){if(""==this.commission_rate)return this.$message.error("请填写直播服务佣金比例"),!1;if(""==this.fee_batch)return this.$message.error("请选择分批缴费要求"),!1;if(4!=this.fee_batch){if(this.pay_step1_one_gdfwf&&""==this.servie_charge1)return this.$message.error("您选择了固定服务费，请填写服务费金额"),!1;if(this.pay_step1_one_bzj){if(""==this.deposit_cnt)return this.$message.error("您选择了保证金，请填写保证金金额"),!1;if(""==this.deposit_return_type||""==this.deposit_return_date)return this.$message.error("您选择了保证金，请填写退保证金条件和天数"),!1}if((2==this.fee_batch||3==this.fee_batch)&&""==this.servie_charge2)return this.$message.error("请填写第2次固定服务费金额"),!1;if(3==this.fee_batch&&""==this.servie_charge3)return this.$message.error("请填写第3次固定服务费金额"),!1}var e=[];this.fileList.forEach(function(t){e.push({agreement_name:t.name,fileurl:t.response.replace("FILEID:","http://img.miyabaobei.com/")})});var t={purchaser_id:this.baseInfo.purchaser_id,supplier_id:this.supplier_id,contract_type:this.contract_type,agreement_list:e,start_date:this.date[0],end_date:this.date[1],commission_rate:this.commission_rate,fee_batch:this.fee_batch,servie_charge1:this.servie_charge1,servie_currency1:this.servie_currency1,deposit_cnt:this.deposit_cnt,deposit_currency:this.deposit_currency,deposit_return_type:this.deposit_return_type,deposit_return_date:this.deposit_return_date,servie_charge2:this.servie_charge2,servie_currency2:this.servie_currency2,servie_charge3:this.servie_charge3,servie_currency3:this.servie_currency3};console.log("---合同填写---",t),this.$store.commit("setContract",t),this.$router.push({path:"/create_contract_2"})},getBaseInfo:function(){var e=re(p.a.mark(function e(){var t;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t={code:200,msg:"success",data:{purchaser_id:11,purchaser_name:"杭州岛屿星河信息技术有限公司",supplier_name:"常州小名堂商贸有限公司",contract_type:{1:"直播服务【单次】合作协议",2:"直播服务【框架】合作协议"},fee_batch:{1:"直播前一次到账",2:"分两批缴费",3:"分三批缴费",4:"本合同不涉及任何提前收费内容"},deposit_return_type:{1:"直播后",2:"合同结束后"},currency_list:{1:"人民币",2:"美元"}}},200==t.code?this.baseInfo=t.data:this.$message.error(t.msg);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},ce=ie,oe=(a("a09e"),Object(L["a"])(ce,ae,se,!1,null,"50571907",null)),le=oe.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"contract_style1"}},[a("section",{staticClass:"hx_panel"},[a("div",{staticClass:"title"},[e._v("请再次确认您选择上传的协议文本")]),a("div",{staticClass:"content _mt20"},[a("el-tabs",{attrs:{type:"border-card"}},e._l(e.agreement_list,function(t,s){return a("el-tab-pane",{key:s},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(t.agreement_name))]),a("embed",{attrs:{width:"800",height:"490",src:t.fileurl}})])}),1)],1)]),a("div",{staticClass:"_mt20"},[a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitPage}},[e._v("完毕，确认提交")]),a("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v("返回上一步")])],1)],1)])},_e=[];function pe(e,t,a,s,n,r,i){try{var c=e[r](i),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(s,n)}function de(e){return function(){var t=this,a=arguments;return new Promise(function(s,n){var r=e.apply(t,a);function i(e){pe(r,s,n,i,c,"next",e)}function c(e){pe(r,s,n,i,c,"throw",e)}i(void 0)})}}var fe={data:function(){return{params:{},agreement_list:[],contract_no:""}},mounted:function(){this.params=this.$store.getters.getContract,this.agreement_list=this.params.agreement_list,console.log("========",this.params)},methods:{goBack:function(){this.$router.push({path:"/create_contract_1"})},submitPage:function(){var e=de(p.a.mark(function e(){var t;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t={code:200,msg:"操作成功",data:null},200==t.code?(this.$message({message:t.msg,type:"success"}),this.contract_no=t.data.contract_no,this.$router.push({path:"/contract_approval",query:{no:this.contract_no}})):this.$message.error(t.msg);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},he=fe,me=(a("9350"),Object(L["a"])(he,ue,_e,!1,null,"5241e1cc",null)),ve=me.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.contract_info?a("div",{attrs:{id:"contract_approval"}},[a("section",{staticClass:"hx_panel"},[a("div",{staticClass:"title"},[e._v("1.合同基本信息")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合同号：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.contract_no))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合作供应商：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.supplier_name))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合作性质：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.contract_type))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合同状态：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.status))])])])])]),a("section",{staticClass:"hx_panel _mt20"},[a("div",{staticClass:"title"},[e._v("2.商户付款银行信息 & 该合同付款要求")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("付款公司全称:")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.payee_name))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("付款银行、账号：")]),a("div",{staticClass:"con"},[e._v("开户行："+e._s(e.contract_info.open_bank)+"  账号："+e._s(e.contract_info.open_account))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("付款要求：")]),a("div",{staticClass:"con"},[e._v(e._s(e.contract_info.fee_batch))])]),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("本次缴费内容：")]),a("div",{staticClass:"con"},[a("ul",[a("li",[e._v("固定服务费: "+e._s(e.contract_info.servie_charge1>0?e.contract_info.servie_charge1+e.contract_info.servie_currency1:"(不收取)"))]),a("li",[e._v("保证金："+e._s(e.contract_info.deposit_cnt>0?e.contract_info.deposit_cnt+e.contract_info.deposit_currency:"(不收取保证金)")+" • 退保证金条件："+e._s(e.contract_info.deposit_return_type)+" "+e._s(e.contract_info.deposit_return_days)+"个自然日 之后退还（遇节假日顺延）")])])])]),e.contract_info.servie_charge2>0?a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("第二次缴费：")]),a("div",{staticClass:"con"},[a("ul",[a("li",[e._v(e._s(e.contract_info.servie_charge2+e.contract_info.servie_currency2))])])])]):e._e(),e.contract_info.servie_charge3>0?a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("第三次缴费：")]),a("div",{staticClass:"con"},[a("ul",[a("li",[e._v(e._s(e.contract_info.servie_charge3+e.contract_info.servie_currency3))])])])]):e._e()])])]),a("section",{staticClass:"hx_panel _mt20"},[a("div",{staticClass:"title"},[e._v("3.合同协议文本审阅")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[e._m(0),a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("合同文本：")]),a("div",{staticClass:"con"},[e._m(1),a("div",[e._v(e._s(e.is_signature_info?"（√）合同已经确认完毕":"(×）合同尚未确认，请点击下述链接，确认协议"))]),a("ul",e._l(e.contract_info.contract_agreement,function(t,s){return a("li",{key:s},[e._v("\n                合同文本"+e._s(t.agreement_no)+"："),a("a",{staticClass:"btn link_btn",on:{click:function(a){return e.showContractFn(t.agreement_no)}}},[e._v(e._s(t.name))]),a("span",{staticClass:"gztip"},[e._v("已经提交"),a("em",[e._v(" "+e._s(t.signature_count)+" ")]),e._v("处盖章位置")])])}),0)])])])])]),a("section",{staticClass:"hx_panel _mt20"},[a("div",{staticClass:"title"},[e._v("4.审批操作")]),a("div",{staticClass:"content _mt20"},[a("ul",{staticClass:"hr_table"},[a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("审批结论：")]),a("div",{staticClass:"con"},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"如果驳回，则必须填写备注"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handlePass}},[e._v("审核通过")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleReject}},[e._v("驳回")])],1)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showContract,expression:"showContract"}],staticClass:"mask"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showContract,expression:"showContract"}],staticClass:"popModule"},[a("section",{staticClass:"hx_panel"},[a("div",{staticClass:"title"},[e._v("审阅协议文本，并为合同文本标记电子签章的盖章位置")]),a("div",{staticClass:"content _mt20"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.curTabNo,callback:function(t){e.curTabNo=t},expression:"curTabNo"}},[e._l(e.contract_info.contract_agreement,function(t,s){return[-1!=t.name.indexOf("pdf")?a("el-tab-pane",{key:s,attrs:{name:t.agreement_no}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(t.name)+"("+e._s(t.agreement_no)+")")]),a("div",{staticClass:"content _mt20"},[a("div",{staticClass:"gzbox"},[a("label",{staticClass:"lineLabel"},[e._v("1. 确认盖章需求:")]),a("el-radio-group",{on:{change:function(a){return e.changeSignature(t.agreement_no)}},model:{value:e.agreement_list[t.agreement_no].is_signature,callback:function(a){e.$set(e.agreement_list[t.agreement_no],"is_signature",a)},expression:"agreement_list[contract.agreement_no].is_signature"}},[a("el-radio",{attrs:{label:"1"}},[e._v("本协议须盖章")]),a("el-radio",{attrs:{label:"2"}},[e._v("确认本协议无需盖章")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.agreement_list[t.agreement_no].is_signature,expression:"agreement_list[contract.agreement_no].is_signature == 1"}],staticClass:"gzbox _mt20"},[a("label",{staticClass:"lineLabel"},[e._v("针对自行上传文本设置盖章页码：")]),a("ul",{staticClass:"_mt10"},e._l(e.gaizhangLen[t.agreement_no],function(s,n){return a("li",{key:n,staticClass:"_mb10"},[a("label",{staticClass:"lineLabel"},[e._v("盖章位置"+e._s(n+1))]),a("span",{staticClass:"required"},[e._v("*")]),e._v("第"),a("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"small"},on:{input:e.getSealData},model:{value:s.page_number,callback:function(t){e.$set(s,"page_number",t)},expression:"item.page_number"}}),e._v("页 \n                      "),a("el-checkbox-group",{staticClass:"checkgroup",on:{change:e.getSealData},model:{value:s.checkList,callback:function(t){e.$set(s,"checkList",t)},expression:"item.checkList"}},[a("el-checkbox",{attrs:{label:"left_stamp",disabled:1==s.checkList.length&&"left_stamp"==s.checkList[0]}},[e._v("左盖章位置")]),a("el-select",{staticClass:"_mr20",attrs:{placeholder:"请选择"},on:{change:function(e){s.rightValue="purchaser_id"==s.leftValue?"supplier_id":"purchaser_id"}},model:{value:s.leftValue,callback:function(t){e.$set(s,"leftValue",t)},expression:"item.leftValue"}},e._l(e.companySeal,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-checkbox",{attrs:{label:"right_stamp",disabled:1==s.checkList.length&&"right_stamp"==s.checkList[0]}},[e._v("右盖章位置")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){s.leftValue="purchaser_id"==s.rightValue?"supplier_id":"purchaser_id"}},model:{value:s.rightValue,callback:function(t){e.$set(s,"rightValue",t)},expression:"item.rightValue"}},e._l(e.companySeal,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("span",{directives:[{name:"show",rawName:"v-show",value:n>0,expression:"index > 0"}],staticClass:"btn link_btn _ml10",on:{click:function(a){return e.cancelCompanySeal(t.agreement_no,n)}}},[e._v("[ 删除该位置 ]")])],1)}),0),a("div",{staticClass:"btn link_btn _mb20 ",on:{click:function(a){return e.addCompanySeal(t.agreement_no)}}},[e._v("+[添加新的盖章位置]")])])]),a("div",{staticClass:"_mt20"},[a("div",{staticStyle:{"font-weight":"500","margin-bottom":"10px"}},[e._v("2. 协议正文审阅")]),a("embed",{staticStyle:{"overflow-x":"hidden"},attrs:{width:"950",height:"600",src:t.fileurl}})])]):a("el-tab-pane",{key:s,attrs:{name:t.agreement_no,label:t.name+"("+t.agreement_no+")"}},[a("img",{staticClass:"image",attrs:{src:t.fileurl}})])]})],2),a("div",{staticClass:"_mt20"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleConfirm}},[e._v("已确认审阅过上述全部协议")]),a("el-button",{attrs:{size:"small"},on:{click:e.hideContract}},[e._v("返回")])],1)],1)])])]):e._e()},ge=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"table_li"},[a("label",{staticClass:"label"},[e._v("使用的合同文本类型：")]),a("div",{staticClass:"con"},[e._v("使用"),a("span",{staticClass:"redColor"},[e._v("自行上传的合同文本")]),e._v("，请您注意审查内容并标记电子签章的盖章位置")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n              请法务同事在审批时注意：由于下列文本使用的是自行上传的文件，因此在法务部门审批过程中，您需要"),a("span",{staticClass:"redColor"},[e._v("手工标注电子签章的盖章位置")]),e._v("，系统才能正确输出印章样式。请点击下述链接跳转至协议内容，在正确的盖章位置标注即可\n            ")])}];function ye(e){return ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function Ce(e){return Ce="function"===typeof Symbol&&"symbol"===ye(Symbol.iterator)?function(e){return ye(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ye(e)},Ce(e)}function we(e,t,a,s,n,r,i){try{var c=e[r](i),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(s,n)}function xe(e){return function(){var t=this,a=arguments;return new Promise(function(s,n){var r=e.apply(t,a);function i(e){we(r,s,n,i,c,"next",e)}function c(e){we(r,s,n,i,c,"throw",e)}i(void 0)})}}var ke={data:function(){return{showContract:!1,is_signature:1,companySeal:[],gaizhangLen:{1:[{leftValue:"supplier_id",rightValue:"purchaser_id",page_number:"",checkList:["left_stamp","right_stamp"]}]},contract_info:null,curTabNo:"",is_signature_info:!1,agreement_list:{},passLock:!0,remark:""}},mounted:function(){this.contract_no=this.$route.query.no,this.getDetails()},methods:{showContractFn:function(e){this.showContract=!0,this.curTabNo=e},hideContract:function(){this.showContract=!1},changeSignature:function(e,t){"1"==t?this.agreement_list[e].signature_page=[]:"2"==t&&(this.agreement_list[e].signature_page=[])},addCompanySeal:function(e){var t={};t=this.gaizhangLen;var a={page_number:"",leftValue:"supplier_id",rightValue:"purchaser_id",checkList:["left_stamp","right_stamp"]};console.log(e,"---"),t[e].push(a),this.gaizhangLen=t,console.log(this.gaizhangLen,"---====--"),this.$forceUpdate()},cancelCompanySeal:function(e,t){this.gaizhangLen[e].splice(t,1),this.$forceUpdate()},getSealData:function(){this.$forceUpdate(),console.log(this.gaizhangLen)},getDetails:function(){var e=xe(p.a.mark(function e(){var t,a,s=this;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t={code:200,msg:"success",data:{contract_no:"CT-8838-20201206",supplier_id:4,purchaser_id:2,supplier_name:"常州小名堂商贸有限公司",purchaser_name:"杭州岛屿星河信息技术有限公司",contract_type:"直播服务【单次】合作协议",status:"待 法务 审批",payee_name:"公司名称",open_bank:"招商银行北京支行",open_account:"102100000030",fee_batch:"3次付款",servie_charge1:"500.00",servie_currency1:"人民币",servie_charge2:"200.00",servie_currency2:"人民币",servie_charge3:"300.00",servie_currency3:"人民币",deposit_cnt:"600.00",deposit_currency:"人民币",deposit_return_type:"直播结束后",deposit_return_days:"30",contract_agreement:[{agreement_no:1,name:"JavaScript模式 (2).pdf",fileurl:"http://img.miyabaobei.com/d1/p6/2021/01/05/49/57/495783774242b782f88ed4c3f8f6c605389442315.pdf",signature_count:0},{agreement_no:3,name:"WechatIMG420.jpeg",fileurl:"http://img.miyabaobei.com/d1/p6/2021/01/05/54/9b/549b6476027c3109123041482c6a5d63389469488.jpeg",signature_count:0},{agreement_no:2,name:"JavaScript模式 (1).pdf",fileurl:"http://img.miyabaobei.com/d1/p6/2021/01/05/49/57/495783774242b782f88ed4c3f8f6c605389442315.pdf",signature_count:0}],approval_log_list:[{op_step:"申请",op_content:"提交申请",op_remark:"备注",op_username:"闫冬",op_datetime:"2020-12-31 10:00:00"},{op_step:"待法务审核",op_content:"合同审核",op_remark:"备注",op_username:"刘楠",op_datetime:"2021-01-01 10:00:00"}]}},200==t.code?(this.contract_info=t.data,this.supplier_id=t.data.supplier_id,this.purchaser_id=t.data.purchaser_id,this.companySeal=[{value:"purchaser_id",label:t.data.purchaser_name},{value:"supplier_id",label:t.data.supplier_name}],a={},this.contract_info.contract_agreement.forEach(function(e){-1!=e.name.indexOf("pdf")?(a[e.agreement_no]={signature_page:[],is_signature:"1"},s.gaizhangLen[e.agreement_no]=[{leftValue:"supplier_id",rightValue:"purchaser_id",page_number:"",checkList:["left_stamp","right_stamp"]}]):a[e.agreement_no]={signature_page:[],is_signature:"2"}}),this.agreement_list=a,console.log(this.agreement_list)):this.$message.error(t.msg);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleConfirm:function(){var e=this,t={},a=this.gaizhangLen,s=function(s){a[s].forEach(function(a,n){var r={page_number:a.page_number,right_stamp:{},left_stamp:{}};a.checkList.forEach(function(t){"left_stamp"==t?r.left_stamp[a.leftValue]=e.getIdForType(a.leftValue):"right_stamp"==t&&(r.right_stamp[a.rightValue]=e.getIdForType(a.rightValue))}),t[s]?t[s].push(r):t[s]=[r]})};for(var n in a)s(n);var r=function(a){var s=e.agreement_list[a];if("1"==s.is_signature){s.signature_page=t[a];var n=t[a].filter(function(e){return""==e.page_number});if(n.length>0)return e.$message.error("请检查并填写需要盖章的页码！合同号".concat(a)),{v:!1}}else"2"==s.is_signature&&(s.signature_page=[]);e.contract_info.contract_agreement.find(function(e){e.agreement_no==a&&(e.signature_count=s.signature_page?s.signature_page.length:0)})};for(var n in this.agreement_list){var i=r(n);if("object"===Ce(i))return i.v}console.log("agreement_list",this.agreement_list),this.is_signature_info=!0,this.showContract=!1},getIdForType:function(e){return"supplier_id"==e?this.supplier_id:this.purchaser_id},agreement:function(){var e=xe(p.a.mark(function e(t){var a;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a={code:200,msg:"操作成功",data:null},200==a.code?t&&t():this.$message.error(a.msg);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handlePass:function(){var e=xe(p.a.mark(function e(){var t=this;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.is_signature_info){e.next=3;break}return this.$message.error("请先确认协议"),e.abrupt("return",!1);case 3:this.agreement(function(){var e={code:200,msg:"操作成功",data:null};200==e.code?t.$message({message:e.msg,type:"success"}):t.$message.error(e.msg)});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleReject:function(){var e=xe(p.a.mark(function e(){var t=this;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("是否执行驳回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={code:200,msg:"操作成功",data:null};200==e.code?t.$message({type:"success",message:e.msg}):t.$message.error(e.msg)}).catch(function(){});case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},je=ke,$e=(a("bc01"),Object(L["a"])(je,be,ge,!1,null,"0949bbfc",null)),Se=$e.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"restPassword"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/supplier_list"}}},[e._v("返回")]),a("el-breadcrumb-item",[e._v("修改密码")])],1),a("div",{staticClass:"content_wrap"},[a("section",{staticClass:"rest_passw "},[a("div",{staticClass:"password _bottom _relative"},[e._m(0),a("el-input",{class:[{error:""!=e.errorTextOld}],attrs:{type:"password",placeholder:""},on:{blur:e.checkOldPassword},model:{value:e.oldpass,callback:function(t){e.oldpass=t},expression:"oldpass"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:""!=e.errorTextOld,expression:"errorTextOld!=''"}],staticClass:"red errortxt"},[e._v(e._s(e.errorTextOld))])],1),a("div",{staticClass:"password _bottom _relative _mt60"},[e._m(1),a("el-input",{class:[{error:""!=e.errorText}],attrs:{type:"password",placeholder:""},on:{blur:e.checkPassword},model:{value:e.newpass,callback:function(t){e.newpass=t},expression:"newpass"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:""!=e.errorText,expression:"errorText!=''"}],staticClass:"red errortxt"},[e._v(e._s(e.errorText))])],1),a("div",{staticClass:"password _bottom _relative _mt60"},[e._m(2),a("el-input",{class:[{error:""!=e.errorTextAgain}],attrs:{type:"password",placeholder:""},on:{blur:e.switchNewPassword},model:{value:e.newpassagain,callback:function(t){e.newpassagain=t},expression:"newpassagain"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:""!=e.errorTextAgain,expression:"errorTextAgain!=''"}],staticClass:"red errortxt"},[e._v(e._s(e.errorTextAgain))])],1)]),e._m(3),a("section",[a("el-button",{attrs:{type:"primary"},on:{click:e.saveSubmit}},[e._v("保存")]),a("el-button",{on:{click:e.cancelBtn}},[e._v("取消")])],1)])],1)},Ie=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",[a("span",{staticClass:"red"},[e._v("*")]),e._v("原密码：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",[a("span",{staticClass:"red"},[e._v("*")]),e._v("新密码：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",[a("span",{staticClass:"red"},[e._v("*")]),e._v("确认密码：")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rule _mb20"},[e._v("\n      新密码规则："),a("br"),e._v("\n      必须同时满足以下条件"),a("br"),e._v("\n      1、必须同时包含 "),a("span",{staticClass:"red"},[e._v("大写字母、小写字母、数字")]),a("br"),e._v("\n      2、密码为 "),a("span",{staticClass:"red"},[e._v("8-15 ")]),e._v("位字符"),a("br"),e._v("\n      3、特殊字符 "),a("span",{staticClass:"red"},[e._v("! @ # $ % ^ & * ? _ , ~ ")]),e._v("可占用一位长度\n    ")])}];function Pe(e,t,a,s,n,r,i){try{var c=e[r](i),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(s,n)}function Ee(e){return function(){var t=this,a=arguments;return new Promise(function(s,n){var r=e.apply(t,a);function i(e){Pe(r,s,n,i,c,"next",e)}function c(e){Pe(r,s,n,i,c,"throw",e)}i(void 0)})}}var Oe={data:function(){return{oldpass:"",newpass:"",newpassagain:"",hideMenuUrl:!0,errorText:"",errorTextAgain:"",errorTextOld:""}},created:function(){},methods:{checkPassword:function(){var e=Ee(p.a.mark(function e(){var t;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.newpass){e.next=3;break}return this.errorText="请填写新密码",e.abrupt("return",!1);case 3:return e.next=5,I.post("role/password",{password:this.newpass});case 5:t=e.sent,200==t.code?this.errorText="":500==t.code?this.errorText=t.msg_note:this.$message.error(t.msg);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkOldPassword:function(){if(""==this.oldpass)return this.errorTextOld="请填写原密码",!1;this.errorTextOld=""},switchNewPassword:function(){return""==this.newpassagain?(this.errorTextAgain="请填写确认密码",!1):this.newpassagain!=this.newpass?(this.errorTextAgain="两次密码不一致，请重新输入",!1):void(this.errorTextAgain="")},saveSubmit:function(){var e=Ee(p.a.mark(function e(){var t;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.oldpass&&""!=this.newpass&&""!=this.newpassagain&&""==this.errorText){e.next=3;break}return console.log("有错误不提交"),e.abrupt("return",!1);case 3:return e.next=5,I.put("/role/password?oldpassword=".concat(this.oldpass,"&password=").concat(this.newpass));case 5:t=e.sent,200==t.code?this.$message({message:"修改成功",type:"success"}):this.$message.error(res.msg);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),cancelBtn:function(){var e=this;this.$confirm("取消内容将不会保存，是否确认取消","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.$router.push({path:"/supplier_list"})}).catch(function(){})}}},Te=Oe,Le=(a("c04d"),Object(L["a"])(Te,ze,Ie,!1,null,"0e55fe38",null)),Ne=Le.exports,Me=new VueRouter({mode:"history",routes:[{path:"/login",component:M,meta:{title:"登录",hideheadder:!0}},{path:"/rest_passw",component:Ne,meta:{title:"修改密码",requireAuth:!0,hideMenu:!0}},{path:"/supplier_list",component:G,meta:{title:"供应商管理列表",requireAuth:!0}},{path:"/contract_details",component:te,meta:{title:"合同详情",requireAuth:!0}},{path:"/create_contract_1",component:le,meta:{title:"新建合同",keepAlive:!0,requireAuth:!0}},{path:"/create_contract_2",component:ve,meta:{title:"新建合同",keepAlive:!0,requireAuth:!0}},{path:"/contract_approval",component:Se,meta:{title:"合同审批",requireAuth:!0}}]});sessionStorage.getItem("token")&&o.commit("set_token",sessionStorage.getItem("token")),sessionStorage.getItem("user_info")&&o.commit("set_userInfo",JSON.parse(sessionStorage.getItem("user_info"))),Me.beforeEach(function(e,t,a){e.meta.title&&(document.title=e.meta.title),e.matched.some(function(e){return e.meta.requireAuth})?o.state.token?a():a({path:"/login",query:{redirect:e.fullPath}}):a()});var Ae=Me,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"index"}},[e.$route.meta.hideheadder?a("router-view"):a("NavMenu",{attrs:{activeIndex:"2001",hideLeftMenu:e.$route.meta.hideMenu}},[a("keep-alive",[e.$route.meta.keepAlive?a("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():a("router-view")],1)],1)},qe=[],Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"nav_menu"}},[a("div",{staticClass:"nav"},[a("div",{staticClass:"navbox"},[a("div",{staticClass:"option"},[e._m(0),a("div",{staticClass:"user_center"},[a("el-dropdown",{attrs:{size:"small"},on:{command:e.userCommand}},[a("span",{staticClass:"name"},[a("i",{staticClass:"fa fa-user-circle"}),e._v("\n              "+e._s(e.supplierName)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("span",{staticStyle:{padding:"0 20px",color:"#1890ff"},on:{click:e.signOut}},[e._v("退出")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"changePassword"}},[a("span",{staticStyle:{padding:"0 20px",color:"#1890ff"}},[e._v("修改密码")])])],1)],1)],1)])])]),a("div",{staticClass:"con_wrapper ant-layout"},[e.hideLeftMenu?e._e():a("div",{staticClass:"con_silder"},e._l(e.menusList,function(t,s){return a("div",{key:s,staticClass:"menu_item",class:{active:t.isActive},on:{click:function(a){return e.downOrUp(t)}}},[a("a",{attrs:{href:t.url||"javascript:;"}},[a("p",[a("img",{attrs:{src:t.icon}}),e._v(e._s(t.menuName)+"\n            "),1!=t.id?a("i",{staticClass:"fa fa-chevron-down"}):e._e()])]),t.childMenu?a("ul",{class:{toDown:t.isDown,toUp:!t.isDown}},e._l(t.childMenu,function(t,s){return a("a",{key:s,attrs:{href:t.url}},[a("li",{class:{current:t.isCurrActive}},[e._v(e._s(t.menuName))])])}),0):e._e()])}),0),a("div",{staticClass:"ant-layout"},[a("div",{staticClass:"cont_main"},[e._t("default")],2)])])])},Ue=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("h2",{staticStyle:{color:"#1890ff"}},[e._v("供应商协作平台")])])}];function Xe(e,t,a,s,n,r,i){try{var c=e[r](i),o=c.value}catch(l){return void a(l)}c.done?t(o):Promise.resolve(o).then(s,n)}function Be(e){return function(){var t=this,a=arguments;return new Promise(function(s,n){var r=e.apply(t,a);function i(e){Xe(r,s,n,i,c,"next",e)}function c(e){Xe(r,s,n,i,c,"throw",e)}i(void 0)})}}var Re=[{id:2,menuName:"供应商管理",url:"",icon:"/menu_icon/icon_002.png",isDown:!1,childMenu:[{id:2001,menuName:"供应商列表",url:"/supplier_list"}]}],Fe={data:function(){return{supplierName:"18519656256",activeMenuId:0,activeChildMenuId:0,menusList:Re,hiderUsCenter:!0}},props:{activeIndex:String,hideLeftMenu:Boolean},created:function(){this.supplierName=this.$store.getters.getUserInfo.username,console.log(this.$store.getters.getUserInfo),this.setActiveMenu()},mounted:function(){},methods:{setActiveMenu:function(){var e=this,t=this.activeIndex;this.menusList.forEach(function(a){var s;a.childMenu&&(s=a.childMenu.find(function(e){return+e.id===+t})),s?(e.activeMenuId=a.id,e.activeChildMenuId=s.id,a.isActive=!0,s.isCurrActive=!0,a.isDown=!0):+a.id===+t?(e.activeMenuId=a.id,a.isActive=!0,a.isDown=!0):(a.isActive=!1,a.isDown=!1)})},downOrUp:function(e){e.isActive&&e.isDown||(e.isDown=!e.isDown,this.menusList.forEach(function(t){t.id!==e.id&&(t.isDown=!1)}))},userCommand:function(e){this[e]()},signOut:function(){var e=Be(p.a.mark(function e(){return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$store.commit("del_token"),this.$router.replace("/login");case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changePassword:function(){this.$router.push({path:"/rest_passw"})}},computed:{}},Je=Fe,Ge=(a("7451"),Object(L["a"])(Je,Ve,Ue,!1,null,"5a34a00e",null)),Qe=Ge.exports,Ke={data:function(){return{isLogin:"",url:""}},components:{NavMenu:Qe},mounted:function(){this.isLogin=this.$store.state.token,this.url=window.location.pathname+window.location.search,this.$store.state.token?(console.log("登录了"),this.$router.push({path:this.url}),this.init()):(console.log("未登录"),this.$router.push({path:"/login"}))},methods:{init:function(){}}},We=Ke,He=(a("df44"),Object(L["a"])(We,De,qe,!1,null,"52fb65ef",null)),Ye=He.exports,Ze=(a("db4d"),a("1368")),et=a.n(Ze),tt=(a("e7eb"),a("c1df")),at=a.n(tt),st=a("5c96"),nt=a.n(st);a("0fae");a("1368").polyfill(),et.a.polyfill(),Vue.use(nt.a),Vue.config.productionTip=!1,new Vue({router:Ae,store:o,render:function(e){return e(Ye)},moment:at.a}).$mount("#index")},"69ae":function(e,t,a){},7451:function(e,t,a){"use strict";var s=a("69ae"),n=a.n(s);n.a},"88e6":function(e,t,a){},"8bbf":function(e,t){e.exports=Vue},9350:function(e,t,a){"use strict";var s=a("88e6"),n=a.n(s);n.a},a09e:function(e,t,a){"use strict";var s=a("2529"),n=a.n(s);n.a},bc01:function(e,t,a){"use strict";var s=a("4523"),n=a.n(s);n.a},c04d:function(e,t,a){"use strict";var s=a("2a2f"),n=a.n(s);n.a},c995:function(e,t,a){"use strict";var s=a("1692"),n=a.n(s);n.a},df44:function(e,t,a){"use strict";var s=a("32dc"),n=a.n(s);n.a},e7eb:function(e,t,a){},f88d:function(e,t,a){"use strict";var s=a("21cc"),n=a.n(s);n.a},fe01:function(e,t,a){"use strict";var s=a("27dd"),n=a.n(s);n.a}});